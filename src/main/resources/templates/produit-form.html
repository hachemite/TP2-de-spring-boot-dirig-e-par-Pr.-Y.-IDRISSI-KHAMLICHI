<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Formulaire Produit</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-4">
    <h1 th:if="*{produit.id == null}">Ajouter un nouveau produit</h1>
    <h1 th:if="*{produit.id != null}">Modifier le produit</h1>

    <form th:action="@{/produits}" th:object="${produit}" method="post">

        <input type="hidden" th:field="*{id}" />

        <h4 class="mt-4">Informations Générales</h4>
        <hr/>
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="nom" class="form-label">Nom du produit:</label>
                    <input type="text" th:field="*{nom}" class="form-control" id="nom" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="prix" class="form-label">Prix:</label>
                    <input type="number" step="0.01" th:field="*{prix}" class="form-control" id="prix" />
                </div>
            </div>
        </div>
        <div class="mb-3">
            <label for="description" class="form-label">Description:</label>
            <input type="text" th:field="*{description}" class="form-control" id="description" />
        </div>
        <div class="mb-3">
            <label for="dateExpiration" class="form-label">Date d'expiration:</label>
            <input type="date" th:field="*{dateExpiration}" class="form-control" id="dateExpiration" />
        </div>

        <!-- Section Relations -->
        <h4 class="mt-4">Relations</h4>
        <hr/>
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="categorie" class="form-label">Catégorie:</label>
                    <input type="text" list="categorie-list" th:field="*{categorieNom}" class="form-control" id="categorie" />
                    <datalist id="categorie-list">
                        <option th:each="cat : ${allCategories}" th:value="${cat.nom}" th:text="${cat.nom}"></option>
                    </datalist>
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="fournisseur" class="form-label">Fournisseur:</label>
                    <input type="text" list="fournisseur-list" th:field="*{fournisseurNom}" class="form-control" id="fournisseur" />
                    <datalist id="fournisseur-list">
                        <option th:each="f : ${allFournisseurs}" th:value="${f.nom}" th:text="${f.nom}"></option>
                    </datalist>
                </div>
            </div>
        </div>
        <div class="mb-3">
            <label for="tags" class="form-label">Tags (étiquettes):</label>
            <select th:field="*{tagLibelles}" class="form-control" id="tags" multiple="multiple">
                <option th:each="tag : ${allTags}"
                        th:value="${tag.libelle}"
                        th:text="${tag.libelle}">
                </option>
            </select>
        </div>

        <h4 class="mt-4">Détails du Produit</h4>
        <hr/>
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="fabricant" class="form-label">Fabricant:</label>
                    <input type="text" th:field="*{detailProduit.fabricant}" class="form-control" id="fabricant" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="paysOrigine" class="form-label">Pays d'origine:</label>
                    <input type="text" th:field="*{detailProduit.paysOrigine}" class="form-control" id="paysOrigine" />
                </div>
            </div>
        </div>
        <div class="mb-3">
            <label for="composition" class="form-label">Composition:</label>
            <input type="text" th:field="*{detailProduit.composition}" class="form-control" id="composition" />
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="dosage" class="form-label">Dosage:</label>
                    <input type="text" th:field="*{detailProduit.dosage}" class="form-control" id="dosage" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="indications" class="form-label">Indications:</label>
                    <input type="text" th:field="*{detailProduit.indications}" class="form-control" id="indications" />
                </div>
            </div>
        </div>

        <hr/>
        <button type="submit" class="btn btn-primary mb-3">Enregistrer</button>
        <a th:href="@{/produits}" class="btn btn-secondary mb-3">Annuler</a>
    </form>
</div>

</body>
</html>